CREATE OR ALTER PROCEDURE usp_AddUser
    @user_id VARCHAR(255),
    @u_name VARCHAR(255),
    @email VARCHAR(255),
    @password VARCHAR(255)
AS
BEGIN
    INSERT INTO [User] (user_id,u_name, email, password)
    VALUES (@user_id, @u_name,@email, @password);
END;



GO
CREATE OR ALTER PROCEDURE usp_AddProduct
    @product_id VARCHAR(255),
    @product_name VARCHAR(255), 
    @product_description TEXT,  
    @price DECIMAL(10, 2),    
    @product_quantity INT,     
    @product_image VARCHAR(255), 
    @product_category ProductCategoryType 
AS
BEGIN
    IF EXISTS (SELECT 1 FROM ProductCategory WHERE CategoryName = @product_category) 
    BEGIN
        INSERT INTO Product (product_id, product_name, product_description, price, product_quantity, product_image, product_category)
        VALUES (@product_id, @product_name, @product_description, @price, @product_quantity, @product_image, @product_category);
    END
    ELSE
    BEGIN
        RAISERROR('Invalid product category.', 16, 1);
    END;
END;

GO
CREATE PROCEDURE usp_GetProducts
    @PageSize INT,
    @PageNumber INT
AS
BEGIN
    DECLARE @Offset INT
    SET @Offset = (@PageNumber - 1) * @PageSize;

    SELECT *
    FROM Product
    ORDER BY product_id
    OFFSET @Offset ROWS
    FETCH NEXT @PageSize ROWS ONLY;
END;

GO
CREATE OR ALTER PROCEDURE usp_EditProduct
    @product_id INT,
    @product_name VARCHAR(255),      
    @product_description TEXT,       
    @price DECIMAL(10, 2),          
    @product_quantity INT,           
    @product_image VARCHAR(255),     
    @product_category ProductCategoryType  
AS
BEGIN
    UPDATE Product
    SET
        product_name = @product_name,
        product_description = @product_description,
        price = @price,
        product_quantity = @product_quantity,
        product_image = @product_image,
        product_category = @product_category
    WHERE
        product_id = @product_id;
END;



GO
CREATE OR ALTER PROCEDURE usp_GetUserByMail
    @email VARCHAR(255)
   
AS
BEGIN
	SELECT user_id,email,u_name,password from [User] where email=@email
    
END;



GO